---
title: WeakMapの使い所
layout: post
---

### WeakMapとは
ES2015で追加された仕様。ハッシュテーブルの一種。

### オブジェクトとの違い

WeekMapとオブジェクトもハッシュテーブルというデータ構造になっているが、何が違うのか。

一番の違いが
|  | Key |  |
|:-----------|------------:|:------------:|
| WeakMap   | Object      | This              |
| Object    | プリミティブ型    | column        |


Map*O(n)* key

### WeakMapの優位な点
任意のオブジェクトに対して別の値を関連付けられる



### 例

```javascript
  // HTMLMediaElement用
  var audioEle;
  var wm = new WeakMap();

  /* 〜中略〜 */

  // WeakMapでHTMLMediaElementを保持する
  if (wm.has(audioEle)) {
    audioSourceNode = wm.get(audioEle);
  } else {
    audioSourceNode = audioCtx.createMediaElementSource(audioEle);
    wm.set(audioEle, audioSourceNode);
  }
```
出典:[https://github.com/TakeshiOkamoto/waveform-spectrum/blob/master/waveform-spectrum.js](https://github.com/TakeshiOkamoto/waveform-spectrum/blob/master/waveform-spectrum.js)

### 参考
- [tc39-GitHub](https://github.com/tc39/ecma262-6-src)
- [MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/WeakMap)
- [https://uhyohyo.net/javascript/16_1.html](https://uhyohyo.net/javascript/16_1.html)
- [https://github.com/TakeshiOkamoto/waveform-spectrum/blob/master/waveform-spectrum.js](https://github.com/TakeshiOkamoto/waveform-spectrum/blob/master/waveform-spectrum.js)
